{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///vue-geokbd.min.js","webpack:///webpack/bootstrap 9387814b775f0bc0c0e9","webpack:///./src/index.js","webpack:///./src/directive.js","webpack:///./src/keypress.js","webpack:///./src/statusMsg.js"],"names":["root","factory","exports","module","define","amd","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_directive","_directive2","_statusMsg","install","Vue","_ref","arguments","length","undefined","_ref$enabled","enabled","_ref$hotkey","hotkey","_ref$statusMessage","statusMessage","options","init","directive","_keypress","_keypress2","_statusMsg2","bind","_this","keypressEvent","evt","metaKey","ctrlKey","String","fromCharCode","which","preventDefault","toggleGlobalState","focusEvent","visibility","blurEvent","el","addEventListener","unbind","removeEventListener","syncText","convertChar","chIndex","alphabet","ch","indexOf","getInputSelection","normalizedValue","range","textInputRange","len","endRange","start","end","selectionStart","selectionEnd","document","selection","createRange","parentElement","replace","createTextRange","moveToBookmark","getBookmark","collapse","compareEndPoints","moveStart","slice","split","moveEnd","offsetToRangeCharacterMove","offset","setInputSelection","startOffset","endOffset","startCharMove","move","select","blur","focus","handleKeypress","target","to","sel","val","element","STATUS_MSG_TEXT_ON","STATUS_MSG_TEXT_OFF","STATUS_MSG_CLASS","STATUS_MSG_CLASS_VISIBLE","STATUS_MSG_CLASS_HIDDEN","showState","createElement","className","innerHTML","body","appendChild","statusMessageStateElement","querySelector","setTimeout"],"mappings":"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","file":"vue-geokbd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-geokbd\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-geokbd\"] = factory();\n\telse\n\t\troot[\"vue-geokbd\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-geokbd\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-geokbd\"] = factory();\n\telse\n\t\troot[\"vue-geokbd\"] = factory();\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _directive = __webpack_require__(1);\n\t\n\tvar _directive2 = _interopRequireDefault(_directive);\n\t\n\tvar _statusMsg = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar install = function install(Vue) {\n\t  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},\n\t      _ref$enabled = _ref.enabled,\n\t      enabled = _ref$enabled === undefined ? false : _ref$enabled,\n\t      _ref$hotkey = _ref.hotkey,\n\t      hotkey = _ref$hotkey === undefined ? '~' : _ref$hotkey,\n\t      _ref$statusMessage = _ref.statusMessage,\n\t      statusMessage = _ref$statusMessage === undefined ? true : _ref$statusMessage;\n\t\n\t  var options = { enabled: enabled, hotkey: hotkey, statusMessage: statusMessage };\n\t\n\t  (0, _statusMsg.init)(options);\n\t  Vue.directive('geokbd', (0, _directive2.default)(options));\n\t};\n\t\n\texports.default = { install: install };\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _keypress = __webpack_require__(2);\n\t\n\tvar _keypress2 = _interopRequireDefault(_keypress);\n\t\n\tvar _statusMsg = __webpack_require__(3);\n\t\n\tvar _statusMsg2 = _interopRequireDefault(_statusMsg);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = function (options) {\n\t  return {\n\t    bind: function bind() {\n\t      var _this = this;\n\t\n\t      this.keypressEvent = function (evt) {\n\t        // Don't capture Ctrl/Meta keypress\n\t        if (evt.metaKey || evt.ctrlKey) return;\n\t\n\t        // Check if hotkey was pressed\n\t        if (options.hotkey === String.fromCharCode(evt.which)) {\n\t          evt.preventDefault();\n\t\n\t          _this.toggleGlobalState();\n\t          return;\n\t        }\n\t\n\t        // Check enabled state\n\t        if (options.enabled === false) return;\n\t\n\t        (0, _keypress2.default)(evt);\n\t      };\n\t\n\t      this.focusEvent = function () {\n\t        _statusMsg2.default.visibility(true, options.enabled, options.statusMessage);\n\t      };\n\t\n\t      this.blurEvent = function () {\n\t        _statusMsg2.default.visibility(false, options.enabled, options.statusMessage);\n\t      };\n\t\n\t      this.el.addEventListener('keypress', this.keypressEvent);\n\t      this.el.addEventListener('focus', this.focusEvent);\n\t      this.el.addEventListener('blur', this.blurEvent);\n\t    },\n\t\n\t    unbind: function unbind() {\n\t      this.el.removeEventListener('keypress', this.keypressEvent);\n\t      this.el.removeEventListener('focus', this.focusEvent);\n\t      this.el.removeEventListener('blur', this.blurEvent);\n\t    },\n\t\n\t    toggleGlobalState: function toggleGlobalState() {\n\t      options.enabled = !options.enabled;\n\t      _statusMsg2.default.syncText(options.enabled);\n\t    }\n\t  };\n\t};\n\t\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = handleKeypress;\n\tfunction convertChar(chIndex) {\n\t  var alphabet = 'abgdevzTiklmnopJrstufqRySCcZwWxjh';\n\t  var ch = String.fromCharCode(chIndex);\n\t\n\t  if (alphabet.indexOf(ch) >= 0) {\n\t    return alphabet.indexOf(ch) + 4304;\n\t  }\n\t\n\t  return chIndex;\n\t}\n\t\n\tfunction getInputSelection(el) {\n\t  var start = 0,\n\t      end = 0,\n\t      normalizedValue,\n\t      range,\n\t      textInputRange,\n\t      len,\n\t      endRange;\n\t\n\t  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\n\t    start = el.selectionStart;\n\t    end = el.selectionEnd;\n\t  } else {\n\t    range = document.selection.createRange();\n\t\n\t    if (range && range.parentElement() === el) {\n\t      len = el.value.length;\n\t      normalizedValue = el.value.replace(/\\r\\n/g, '\\n');\n\t\n\t      // Create a working TextRange that lives only in the input\n\t      textInputRange = el.createTextRange();\n\t      textInputRange.moveToBookmark(range.getBookmark());\n\t\n\t      // Check if the start and end of the selection are at the very end\n\t      // of the input, since moveStart/moveEnd doesn't return what we want\n\t      // in those cases\n\t      endRange = el.createTextRange();\n\t      endRange.collapse(false);\n\t\n\t      if (textInputRange.compareEndPoints('StartToEnd', endRange) > -1) {\n\t        start = end = len;\n\t      } else {\n\t        start = -textInputRange.moveStart('character', -len);\n\t        start += normalizedValue.slice(0, start).split('\\n').length - 1;\n\t\n\t        if (textInputRange.compareEndPoints('EndToEnd', endRange) > -1) {\n\t          end = len;\n\t        } else {\n\t          end = -textInputRange.moveEnd('character', -len);\n\t          end += normalizedValue.slice(0, end).split('\\n').length - 1;\n\t        }\n\t      }\n\t    }\n\t  }\n\t\n\t  return {\n\t    start: start,\n\t    end: end\n\t  };\n\t}\n\t\n\tfunction offsetToRangeCharacterMove(el, offset) {\n\t  return offset - (el.value.slice(0, offset).split('\\r\\n').length - 1);\n\t}\n\t\n\tfunction setInputSelection(el, startOffset, endOffset) {\n\t  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\n\t    el.selectionStart = startOffset;\n\t    el.selectionEnd = endOffset;\n\t  } else {\n\t    var range = el.createTextRange();\n\t    var startCharMove = offsetToRangeCharacterMove(el, startOffset);\n\t\n\t    range.collapse(true);\n\t    if (startOffset === endOffset) {\n\t      range.move('character', startCharMove);\n\t    } else {\n\t      range.moveEnd('character', offsetToRangeCharacterMove(el, endOffset));\n\t      range.moveStart('character', startCharMove);\n\t    }\n\t    range.select();\n\t  }\n\t\n\t  // A little 'hack' to keep natural browser behavior while typing\n\t  el.blur();\n\t  el.focus();\n\t}\n\t\n\tfunction handleKeypress(evt) {\n\t  var el = evt.target;\n\t  var which = evt.which;\n\t  var to = convertChar(which);\n\t\n\t  // Don't take any actions if conversion didn't happen\n\t  if (which === to) {\n\t    return;\n\t  }\n\t  evt.preventDefault();\n\t\n\t  // Insert converted char\n\t  var sel = getInputSelection(el);\n\t  var val = el.value;\n\t\n\t  el.value = val.slice(0, sel.start) + String.fromCharCode(to) + val.slice(sel.end);\n\t\n\t  // Move caret to correct position\n\t  setInputSelection(el, sel.start + 1, sel.start + 1);\n\t}\n\tmodule.exports = exports['default'];\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar STATUS_MSG_TEXT_ON = 'ჩართულია';\n\tvar STATUS_MSG_TEXT_OFF = 'გამორთულია';\n\tvar STATUS_MSG_CLASS = 'vue-geokbd--statusMessage';\n\tvar STATUS_MSG_CLASS_VISIBLE = STATUS_MSG_CLASS + ' visible';\n\tvar STATUS_MSG_CLASS_HIDDEN = STATUS_MSG_CLASS + ' hidden';\n\t\n\tvar element,\n\t    showState = false;\n\t\n\tvar init = exports.init = function init(options) {\n\t  element = document.createElement('div');\n\t  element.className = STATUS_MSG_CLASS;\n\t  element.innerHTML = '\\n  <div class=\"vue-geokbd--statusMessage-text\">\\n    \\u10E5\\u10D0\\u10E0\\u10D7\\u10E3\\u10DA\\u10D8 \\u10D9\\u10DA\\u10D0\\u10D5\\u10D8\\u10D0\\u10E2\\u10E3\\u10E0\\u10D0: <u class=\"vue-geokbd--statusMessage-state\"></u><br>\\n    \\u10E9\\u10D0\\u10E0\\u10D7\\u10D5\\u10D0/\\u10D2\\u10D0\\u10DB\\u10DD\\u10E0\\u10D7\\u10D5\\u10D0 \\u10D9\\u10DA\\u10D0\\u10D5\\u10D8\\u10E8\\u10D8\\u10D7 (\\'' + options.hotkey + '\\')\\n  </div>\\n';\n\t\n\t  document.body.appendChild(element);\n\t};\n\t\n\tvar syncText = function syncText(enabled) {\n\t  var statusMessageStateElement = element.querySelector('.vue-geokbd--statusMessage-state');\n\t\n\t  statusMessageStateElement.innerHTML = enabled ? STATUS_MSG_TEXT_ON : STATUS_MSG_TEXT_OFF;\n\t};\n\t\n\tvar visibility = function visibility(_visibility, enabled, statusMessage) {\n\t  if (statusMessage === false) return;\n\t  showState = _visibility = !!_visibility;\n\t\n\t  // Add little debounce to keep consistent visibility state\n\t  setTimeout(function () {\n\t    if (showState === _visibility) {\n\t      element.className = _visibility ? STATUS_MSG_CLASS_VISIBLE : STATUS_MSG_CLASS_HIDDEN;\n\t      syncText(enabled);\n\t    }\n\t  }, 100);\n\t};\n\t\n\texports.default = { syncText: syncText, visibility: visibility };\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** vue-geokbd.min.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 9387814b775f0bc0c0e9\n **/","import directive from './directive';\nimport { init as statusMsgInit } from './statusMsg';\n\nconst install = (\n\tVue,\n\t{ enabled = false, hotkey = '~', statusMessage = true } = {}\n) => {\n  const options = { enabled, hotkey, statusMessage };\n\n  statusMsgInit(options);\n  Vue.directive('geokbd', directive(options));\n};\n\nexport default { install };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","import handleKeypress from './keypress';\nimport statusMsg from './statusMsg';\n\nexport default (options) => ({\n  bind: function () {\n    this.keypressEvent = (evt) => {\n      // Don't capture Ctrl/Meta keypress\n      if (evt.metaKey || evt.ctrlKey) return;\n\n      // Check if hotkey was pressed\n      if (options.hotkey === String.fromCharCode(evt.which)) {\n        evt.preventDefault();\n\n        this.toggleGlobalState();\n        return;\n      }\n\n      // Check enabled state\n      if (options.enabled === false) return;\n\n      handleKeypress(evt);\n    };\n\n    this.focusEvent = () => {\n      statusMsg.visibility(true, options.enabled, options.statusMessage);\n    };\n\n    this.blurEvent = () => {\n      statusMsg.visibility(false, options.enabled, options.statusMessage);\n    };\n\n    this.el.addEventListener('keypress', this.keypressEvent);\n    this.el.addEventListener('focus', this.focusEvent);\n    this.el.addEventListener('blur', this.blurEvent);\n  },\n\n  unbind: function () {\n    this.el.removeEventListener('keypress', this.keypressEvent);\n    this.el.removeEventListener('focus', this.focusEvent);\n    this.el.removeEventListener('blur', this.blurEvent);\n  },\n\n  toggleGlobalState: function () {\n    options.enabled = !options.enabled;\n    statusMsg.syncText(options.enabled);\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/directive.js\n **/","function convertChar(chIndex) {\n  var alphabet = 'abgdevzTiklmnopJrstufqRySCcZwWxjh';\n  var ch = String.fromCharCode(chIndex);\n\n  if (alphabet.indexOf(ch) >= 0) {\n    return alphabet.indexOf(ch) + 4304;\n  }\n\n  return chIndex;\n}\n\nfunction getInputSelection(el) {\n  var start = 0,\n    end = 0,\n    normalizedValue, range,\n    textInputRange, len, endRange;\n\n  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\n    start = el.selectionStart;\n    end = el.selectionEnd;\n  } else {\n    range = document.selection.createRange();\n\n    if (range && range.parentElement() === el) {\n      len = el.value.length;\n      normalizedValue = el.value.replace(/\\r\\n/g, '\\n');\n\n      // Create a working TextRange that lives only in the input\n      textInputRange = el.createTextRange();\n      textInputRange.moveToBookmark(range.getBookmark());\n\n      // Check if the start and end of the selection are at the very end\n      // of the input, since moveStart/moveEnd doesn't return what we want\n      // in those cases\n      endRange = el.createTextRange();\n      endRange.collapse(false);\n\n      if (textInputRange.compareEndPoints('StartToEnd', endRange) > -1) {\n        start = end = len;\n      } else {\n        start = -textInputRange.moveStart('character', -len);\n        start += normalizedValue.slice(0, start).split('\\n').length - 1;\n\n        if (textInputRange.compareEndPoints('EndToEnd', endRange) > -1) {\n          end = len;\n        } else {\n          end = -textInputRange.moveEnd('character', -len);\n          end += normalizedValue.slice(0, end).split('\\n').length - 1;\n        }\n      }\n    }\n  }\n\n  return {\n    start: start,\n    end: end\n  };\n}\n\nfunction offsetToRangeCharacterMove(el, offset) {\n  return offset - (el.value.slice(0, offset).split('\\r\\n').length - 1);\n}\n\nfunction setInputSelection(el, startOffset, endOffset) {\n  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\n    el.selectionStart = startOffset;\n    el.selectionEnd = endOffset;\n  } else {\n    let range = el.createTextRange();\n    let startCharMove = offsetToRangeCharacterMove(el, startOffset);\n\n    range.collapse(true);\n    if (startOffset === endOffset) {\n      range.move('character', startCharMove);\n    } else {\n      range.moveEnd('character', offsetToRangeCharacterMove(el, endOffset));\n      range.moveStart('character', startCharMove);\n    }\n    range.select();\n  }\n\n  // A little 'hack' to keep natural browser behavior while typing\n  el.blur();\n  el.focus();\n}\n\nexport default function handleKeypress(evt) {\n  const el = evt.target;\n  const which = evt.which;\n  const to = convertChar(which);\n\n  // Don't take any actions if conversion didn't happen\n  if (which === to) {\n    return;\n  }\n  evt.preventDefault();\n\n  // Insert converted char\n  const sel = getInputSelection(el);\n  const val = el.value;\n\n  el.value = val.slice(0, sel.start) + String.fromCharCode(to) + val.slice(sel.end);\n\n  // Move caret to correct position\n  setInputSelection(el, sel.start + 1, sel.start + 1);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/keypress.js\n **/","const STATUS_MSG_TEXT_ON = 'ჩართულია';\nconst STATUS_MSG_TEXT_OFF = 'გამორთულია';\nconst STATUS_MSG_CLASS = 'vue-geokbd--statusMessage';\nconst STATUS_MSG_CLASS_VISIBLE = STATUS_MSG_CLASS + ' visible';\nconst STATUS_MSG_CLASS_HIDDEN = STATUS_MSG_CLASS + ' hidden';\n\nvar element, showState = false;\n\nexport const init = (options) => {\n  element = document.createElement('div');\n  element.className = STATUS_MSG_CLASS;\n  element.innerHTML = `\n  <div class=\"vue-geokbd--statusMessage-text\">\n    ქართული კლავიატურა: <u class=\"vue-geokbd--statusMessage-state\"></u><br>\n    ჩართვა/გამორთვა კლავიშით ('${options.hotkey}')\n  </div>\n`;\n\n  document.body.appendChild(element);\n};\n\nconst syncText = (enabled) => {\n  var statusMessageStateElement = element.querySelector('.vue-geokbd--statusMessage-state');\n\n  statusMessageStateElement.innerHTML = enabled ? STATUS_MSG_TEXT_ON : STATUS_MSG_TEXT_OFF;\n};\n\nconst visibility = (visibility, enabled, statusMessage) => {\n  if (statusMessage === false) return;\n  showState = visibility = !!visibility;\n\n  // Add little debounce to keep consistent visibility state\n  setTimeout(function () {\n    if (showState === visibility) {\n      element.className = visibility ? STATUS_MSG_CLASS_VISIBLE : STATUS_MSG_CLASS_HIDDEN;\n      syncText(enabled);\n    }\n  }, 100);\n};\n\nexport default { syncText, visibility };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/statusMsg.js\n **/"],"sourceRoot":""}