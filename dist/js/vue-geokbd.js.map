{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 7f55ade95805e9925c6a","webpack:///./src/index.js","webpack:///./src/directive.js","webpack:///./src/keypress.js","webpack:///./src/statusMsg.js"],"names":["install","Vue","enabled","hotkey","statusMessage","options","directive","bind","el","binding","keypressEvent","evt","metaKey","ctrlKey","String","fromCharCode","which","preventDefault","toggleGlobalState","focusEvent","visibility","blurEvent","addEventListener","unbind","removeEventListener","syncText","handleKeypress","convertChar","chIndex","alphabet","ch","indexOf","getInputSelection","start","end","normalizedValue","range","textInputRange","len","endRange","selectionStart","selectionEnd","document","selection","createRange","parentElement","value","length","replace","createTextRange","moveToBookmark","getBookmark","collapse","compareEndPoints","moveStart","slice","split","moveEnd","offsetToRangeCharacterMove","offset","setInputSelection","startOffset","endOffset","startCharMove","move","select","blur","focus","target","to","sel","val","STATUS_MSG_TEXT_ON","STATUS_MSG_TEXT_OFF","STATUS_MSG_CLASS","STATUS_MSG_CLASS_VISIBLE","STATUS_MSG_CLASS_HIDDEN","element","showState","init","createElement","className","innerHTML","body","appendChild","statusMessageStateElement","querySelector","setTimeout"],"mappings":"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","file":"vue-geokbd.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"vue-geokbd\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"vue-geokbd\"] = factory();\n\telse\n\t\troot[\"vue-geokbd\"] = factory();\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 7f55ade95805e9925c6a\n **/","import directive from './directive';\nimport { init as statusMsgInit } from './statusMsg';\n\nconst install = (\n\tVue,\n\t{ enabled = false, hotkey = '~', statusMessage = true } = {}\n) => {\n  const options = { enabled, hotkey, statusMessage };\n\n  statusMsgInit(options);\n  Vue.directive('geokbd', directive(options));\n};\n\nexport default { install };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/index.js\n **/","import handleKeypress from './keypress';\nimport statusMsg from './statusMsg';\n\nexport default (options) => ({\n  bind: function (el, binding) {\n    // Vue 1.x support\n    if (this && this.el) {\n      el = this.el;\n      binding = this;\n    }\n\n    binding.keypressEvent = (evt) => {\n      // Don't capture Ctrl/Meta keypress\n      if (evt.metaKey || evt.ctrlKey) return;\n\n      // Check if hotkey was pressed\n      if (options.hotkey === String.fromCharCode(evt.which)) {\n        evt.preventDefault();\n\n        this.toggleGlobalState();\n        return;\n      }\n\n      // Check enabled state\n      if (options.enabled === false) return;\n\n      handleKeypress(evt);\n    };\n\n    binding.focusEvent = () => {\n      statusMsg.visibility(true, options.enabled, options.statusMessage);\n    };\n\n    binding.blurEvent = () => {\n      statusMsg.visibility(false, options.enabled, options.statusMessage);\n    };\n\n    el.addEventListener('keypress', binding.keypressEvent);\n    el.addEventListener('focus', binding.focusEvent);\n    el.addEventListener('blur', binding.blurEvent);\n  },\n\n  unbind: function (el, binding) {\n    // Vue 1.x support\n    if (this && this.el) {\n      el = this.el;\n      binding = this;\n    }\n\n    el.removeEventListener('keypress', binding.keypressEvent);\n    el.removeEventListener('focus', binding.focusEvent);\n    el.removeEventListener('blur', binding.blurEvent);\n  },\n\n  toggleGlobalState: function () {\n    options.enabled = !options.enabled;\n    statusMsg.syncText(options.enabled);\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/directive.js\n **/","function convertChar(chIndex) {\n  var alphabet = 'abgdevzTiklmnopJrstufqRySCcZwWxjh';\n  var ch = String.fromCharCode(chIndex);\n\n  if (alphabet.indexOf(ch) >= 0) {\n    return alphabet.indexOf(ch) + 4304;\n  }\n\n  return chIndex;\n}\n\nfunction getInputSelection(el) {\n  var start = 0,\n    end = 0,\n    normalizedValue, range,\n    textInputRange, len, endRange;\n\n  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\n    start = el.selectionStart;\n    end = el.selectionEnd;\n  } else {\n    range = document.selection.createRange();\n\n    if (range && range.parentElement() === el) {\n      len = el.value.length;\n      normalizedValue = el.value.replace(/\\r\\n/g, '\\n');\n\n      // Create a working TextRange that lives only in the input\n      textInputRange = el.createTextRange();\n      textInputRange.moveToBookmark(range.getBookmark());\n\n      // Check if the start and end of the selection are at the very end\n      // of the input, since moveStart/moveEnd doesn't return what we want\n      // in those cases\n      endRange = el.createTextRange();\n      endRange.collapse(false);\n\n      if (textInputRange.compareEndPoints('StartToEnd', endRange) > -1) {\n        start = end = len;\n      } else {\n        start = -textInputRange.moveStart('character', -len);\n        start += normalizedValue.slice(0, start).split('\\n').length - 1;\n\n        if (textInputRange.compareEndPoints('EndToEnd', endRange) > -1) {\n          end = len;\n        } else {\n          end = -textInputRange.moveEnd('character', -len);\n          end += normalizedValue.slice(0, end).split('\\n').length - 1;\n        }\n      }\n    }\n  }\n\n  return {\n    start: start,\n    end: end\n  };\n}\n\nfunction offsetToRangeCharacterMove(el, offset) {\n  return offset - (el.value.slice(0, offset).split('\\r\\n').length - 1);\n}\n\nfunction setInputSelection(el, startOffset, endOffset) {\n  if (typeof el.selectionStart === 'number' && typeof el.selectionEnd === 'number') {\n    el.selectionStart = startOffset;\n    el.selectionEnd = endOffset;\n  } else {\n    let range = el.createTextRange();\n    let startCharMove = offsetToRangeCharacterMove(el, startOffset);\n\n    range.collapse(true);\n    if (startOffset === endOffset) {\n      range.move('character', startCharMove);\n    } else {\n      range.moveEnd('character', offsetToRangeCharacterMove(el, endOffset));\n      range.moveStart('character', startCharMove);\n    }\n    range.select();\n  }\n\n  // A little 'hack' to keep natural browser behavior while typing\n  el.blur();\n  el.focus();\n}\n\nexport default function handleKeypress(evt) {\n  const el = evt.target;\n  const which = evt.which;\n  const to = convertChar(which);\n\n  // Don't take any actions if conversion didn't happen\n  if (which === to) {\n    return;\n  }\n  evt.preventDefault();\n\n  // Insert converted char\n  const sel = getInputSelection(el);\n  const val = el.value;\n\n  el.value = val.slice(0, sel.start) + String.fromCharCode(to) + val.slice(sel.end);\n\n  // Move caret to correct position\n  setInputSelection(el, sel.start + 1, sel.start + 1);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/keypress.js\n **/","const STATUS_MSG_TEXT_ON = 'ჩართულია';\nconst STATUS_MSG_TEXT_OFF = 'გამორთულია';\nconst STATUS_MSG_CLASS = 'vue-geokbd--statusMessage';\nconst STATUS_MSG_CLASS_VISIBLE = STATUS_MSG_CLASS + ' visible';\nconst STATUS_MSG_CLASS_HIDDEN = STATUS_MSG_CLASS + ' hidden';\n\nvar element, showState = false;\n\nexport const init = (options) => {\n  element = document.createElement('div');\n  element.className = STATUS_MSG_CLASS;\n  element.innerHTML = `\n  <div class=\"vue-geokbd--statusMessage-text\">\n    ქართული კლავიატურა: <u class=\"vue-geokbd--statusMessage-state\"></u><br>\n    ჩართვა/გამორთვა კლავიშით ('${options.hotkey}')\n  </div>\n`;\n\n  document.body.appendChild(element);\n};\n\nconst syncText = (enabled) => {\n  var statusMessageStateElement = element.querySelector('.vue-geokbd--statusMessage-state');\n\n  statusMessageStateElement.innerHTML = enabled ? STATUS_MSG_TEXT_ON : STATUS_MSG_TEXT_OFF;\n};\n\nconst visibility = (visibility, enabled, statusMessage) => {\n  if (statusMessage === false) return;\n  showState = visibility = !!visibility;\n\n  // Add little debounce to keep consistent visibility state\n  setTimeout(function () {\n    if (showState === visibility) {\n      element.className = visibility ? STATUS_MSG_CLASS_VISIBLE : STATUS_MSG_CLASS_HIDDEN;\n      syncText(enabled);\n    }\n  }, 100);\n};\n\nexport default { syncText, visibility };\n\n\n\n/** WEBPACK FOOTER **\n ** ./~/eslint-loader!./src/statusMsg.js\n **/"],"sourceRoot":""}